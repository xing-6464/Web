## 高级特性

### v-model

- Vue2中定义自定义组件`v-model`，先在`model`中`prop`定义双向绑定数值名字，`event`设置触发事件名字


```javascript
Vue.component('base-input', {
  model: {
    prop: 'text',
    event: 'change'
  },
  props: {
    text: String,
    default () {
      return ''
    }
  },
  template: `
    <input
      type="text"
      :value="text"
      @input="$emit('change', $event.target.value)"
    >
  `
})
```

- 现在在这个组件上自定义组件`v-model`的时候
```html
<base-input v-model="text"></base-input>
```

[Demo](./demo%E4%BB%A3%E7%A0%81/AdvancedUse/CustomVModel.vue)
- - -

### $nextTick

- Vue是异步渲染
- data改变之后，DOM不会立刻渲染
- $nextTick会在DOM渲染之后被触发，以获取最新的DOM节点

- **用法**

  将回调延迟到下次 DOM 更新循环之后执行。在修改数据之后立即使用它，然后等待 DOM 更新。它跟全局方法 Vue.nextTick 一样，不同的是回调的 this 自动绑定到调用它的实例上。


[Demo](./demo%E4%BB%A3%E7%A0%81/AdvancedUse/NextTick.vue)
- - -

### slot

- 基本使用
```js
Vue.component('alert-box', {
  template: `
    <div class="demo-alert-box">
      <strong>Error!</strong>
      <slot></slot>
    </div>
  `
})
```
```html
<alert-box>
  Something bad happened.
</alert-box>
```
渲染出**Error! Something bad happened.**

- 具名插槽
  
  - 在子组件中定义多个slot
  ```html
    <div class="container">
      <header>
        <slot name="header"></slot>
      </header>
      <main>
        <slot></slot>
      </main>
      <footer>
        <slot name="footer"></slot>
      </footer>
    </div>
  ```
  - 在父组件中使用
  ```html
    <!-- #是v-slot的缩写 v-slot:header也可以 -->
    <!-- 中间default的slot可以不用写，vue会自动把不属于header和footer的部分渲染财务default的 -->
    <BaseLayout>
      <template #header>
        <h1>Here might be a page title</h1>
      </template>

      <template #default>
        <p>A paragraph for the main content.</p>
        <p>And another one.</p>
      </template>

      <template #footer>
        <p>Here's some contact info</p>
      </template>
    </BaseLayout>
  ```


- 作用域插槽

  在子组件中给插槽传入一个属性，在父组件中可以使用这个属性
  - 子组件
  ```html
  <!-- <MyComponent> 的模板 -->
  <div>
    <slot :text="greetingMessage" :count="1"></slot>
  </div>
  ```
  - 父组件使用
  ```html
    <MyComponent>
      <template v-slot="slotProps">
        {{ slotProps.text }} {{ slotProps.count }}
      </template>
    </MyComponent>
  ```

[Demo](./demo%E4%BB%A3%E7%A0%81//AdvancedUse/SlotDemo.vue)

- - -

### 动态组件

- 用法

  `:is="component-name"`
